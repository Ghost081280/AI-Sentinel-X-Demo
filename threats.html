<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Threat Monitor | AI Sentinel-X</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #00ff88;
            --secondary: #00ccff;
            --accent: #7c3aed;
            --danger: #ff0044;
            --warning: #ffaa00;
            --success: #00ff88;
            --bg-dark: #0a0e1a;
            --bg-darker: #060912;
            --bg-card: rgba(10, 20, 40, 0.8);
            --border: rgba(0, 255, 136, 0.2);
            --text-primary: #ffffff;
            --text-secondary: #8892b0;
            --gradient-1: linear-gradient(135deg, #00ff88 0%, #00ccff 100%);
            --gradient-danger: linear-gradient(135deg, #ff0044 0%, #ff6644 100%);
        }

        body {
            font-family: 'Consolas', 'Monaco', monospace;
            background: var(--bg-darker);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Threat Background */
        .threat-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            background: 
                radial-gradient(circle at 30% 20%, rgba(255, 0, 68, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(255, 170, 0, 0.05) 0%, transparent 50%);
        }

        .scan-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--danger), transparent);
            animation: scanDown 4s linear infinite;
        }

        @keyframes scanDown {
            0% { top: -2px; opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .page-header {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .alert-strip {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient-danger);
            animation: alertPulse 2s ease-in-out infinite;
        }

        @keyframes alertPulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .page-title {
            font-size: 36px;
            font-weight: bold;
            background: var(--gradient-danger);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 3px;
        }

        .threat-summary {
            display: flex;
            gap: 30px;
            align-items: center;
            flex-wrap: wrap;
        }

        .summary-item {
            text-align: center;
        }

        .summary-value {
            font-size: 32px;
            font-weight: bold;
            color: var(--danger);
        }

        .summary-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        /* Control Bar */
        .control-bar {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .filter-group {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px 16px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 1px;
        }

        .filter-btn:hover {
            background: rgba(0, 255, 136, 0.1);
            border-color: var(--primary);
            color: var(--primary);
        }

        .filter-btn.active {
            background: var(--gradient-1);
            color: var(--bg-darker);
            font-weight: bold;
        }

        /* Threat Grid */
        .threat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .threat-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .threat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 0, 68, 0.2);
        }

        .threat-card.critical {
            border-color: rgba(255, 0, 68, 0.5);
            background: rgba(255, 0, 68, 0.05);
        }

        .threat-card.high {
            border-color: rgba(255, 170, 0, 0.5);
            background: rgba(255, 170, 0, 0.05);
        }

        .threat-card.medium {
            border-color: rgba(0, 204, 255, 0.5);
            background: rgba(0, 204, 255, 0.05);
        }

        .threat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .threat-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .threat-type {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .threat-severity {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .severity-critical {
            background: var(--gradient-danger);
            color: white;
        }

        .severity-high {
            background: linear-gradient(135deg, var(--warning) 0%, #ff8844 100%);
            color: white;
        }

        .severity-medium {
            background: linear-gradient(135deg, var(--secondary) 0%, #0088ff 100%);
            color: white;
        }

        .threat-details {
            margin-bottom: 15px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .detail-label {
            color: var(--text-secondary);
        }

        .detail-value {
            color: var(--text-primary);
            font-weight: bold;
        }

        .threat-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .action-btn {
            flex: 1;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px 12px;
            color: var(--primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
            text-transform: uppercase;
        }

        .action-btn:hover {
            background: var(--primary);
            color: var(--bg-darker);
        }

        .action-btn.danger {
            border-color: var(--danger);
            color: var(--danger);
        }

        .action-btn.danger:hover {
            background: var(--danger);
            color: white;
        }

        /* Real-time Feed */
        .feed-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 20px;
            height: 400px;
            display: flex;
            flex-direction: column;
        }

        .feed-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .feed-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
            text-transform: uppercase;
        }

        .feed-content {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
        }

        .feed-item {
            background: rgba(0, 0, 0, 0.3);
            border-left: 3px solid var(--danger);
            padding: 10px 15px;
            margin-bottom: 10px;
            border-radius: 0 6px 6px 0;
            animation: feedSlide 0.3s ease;
        }

        @keyframes feedSlide {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .feed-time {
            font-size: 11px;
            color: var(--text-secondary);
            margin-bottom: 3px;
        }

        .feed-message {
            font-size: 13px;
            line-height: 1.4;
        }

        /* Back Button */
        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 10px 20px;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .back-btn:hover {
            background: var(--primary);
            color: var(--bg-darker);
            transform: translateX(-5px);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .page-header {
                padding: 20px;
            }
            
            .page-title {
                font-size: 28px;
            }
            
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .threat-grid {
                grid-template-columns: 1fr;
            }
            
            .control-bar {
                justify-content: center;
            }
            
            .threat-summary {
                justify-content: center;
            }
            
            .back-btn {
                top: 10px;
                left: 10px;
                padding: 8px 15px;
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            .page-title {
                font-size: 24px;
            }
            
            .summary-value {
                font-size: 24px;
            }
            
            .filter-btn {
                padding: 6px 12px;
                font-size: 11px;
            }
            
            .threat-card {
                padding: 15px;
            }
            
            .threat-title {
                font-size: 16px;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--danger);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--warning);
        }
    </style>
</head>
<body>
    <script>
        // Check authentication
        const auth = localStorage.getItem('sentinel_auth');
        if (!auth) {
            window.location.href = 'index.html';
        } else {
            const authData = JSON.parse(auth);
            if (Date.now() - authData.timestamp > 24 * 60 * 60 * 1000) {
                localStorage.removeItem('sentinel_auth');
                window.location.href = 'index.html';
            }
        }
    </script>

    <!-- Back Button -->
    <a href="dashboard.html" class="back-btn">
        <span>←</span>
        <span>Back to Dashboard</span>
    </a>

    <!-- Threat Background -->
    <div class="threat-bg">
        <div class="scan-line"></div>
    </div>

    <!-- Container -->
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <div class="alert-strip"></div>
            <div class="header-content">
                <div>
                    <h1 class="page-title">THREAT MONITOR</h1>
                    <p style="color: var(--text-secondary); margin-top: 5px;">Real-time threat detection and analysis</p>
                </div>
                <div class="threat-summary">
                    <div class="summary-item">
                        <div class="summary-value" id="activeThreats">7</div>
                        <div class="summary-label">Active Threats</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value" style="color: var(--warning);" id="pendingThreats">3</div>
                        <div class="summary-label">Pending</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value" style="color: var(--success);" id="neutralizedThreats">24</div>
                        <div class="summary-label">Neutralized</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Control Bar -->
        <div class="control-bar">
            <div class="filter-group">
                <button class="filter-btn active" onclick="filterThreats('all')">All Threats</button>
                <button class="filter-btn" onclick="filterThreats('critical')">Critical</button>
                <button class="filter-btn" onclick="filterThreats('high')">High</button>
                <button class="filter-btn" onclick="filterThreats('medium')">Medium</button>
            </div>
            <div class="filter-group">
                <button class="filter-btn" onclick="startThreatHunt()" style="border-color: var(--danger); color: var(--danger);">
                    🎯 Start Hunt
                </button>
                <button class="filter-btn" onclick="deployDefenses()" style="border-color: var(--success); color: var(--success);">
                    🛡️ Deploy Defenses
                </button>
            </div>
        </div>

        <!-- Threat Grid -->
        <div class="threat-grid" id="threatGrid">
            <!-- Threats will be populated by JavaScript -->
        </div>

        <!-- Real-time Feed -->
        <div class="feed-section">
            <div class="feed-header">
                <h2 class="feed-title">Live Threat Feed</h2>
                <span style="color: var(--danger); font-size: 12px;">● LIVE</span>
            </div>
            <div class="feed-content" id="threatFeed">
                <!-- Feed items will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Sample threats data
        const threats = [
            {
                id: 1,
                name: 'DDoS Attack Detected',
                type: 'Network Attack',
                severity: 'critical',
                source: '45.12.78.* (Multiple IPs)',
                target: 'API Gateway',
                status: 'Active',
                duration: '12 minutes',
                attempts: '45,892'
            },
            {
                id: 2,
                name: 'SQL Injection Attempt',
                type: 'Web Application',
                severity: 'high',
                source: '192.168.1.105',
                target: '/api/users endpoint',
                status: 'Monitoring',
                duration: '3 minutes',
                attempts: '127'
            },
            {
                id: 3,
                name: 'Brute Force Login',
                type: 'Authentication',
                severity: 'high',
                source: '89.45.67.123',
                target: 'Admin Panel',
                status: 'Blocking',
                duration: '8 minutes',
                attempts: '1,024'
            },
            {
                id: 4,
                name: 'Port Scanning Activity',
                type: 'Reconnaissance',
                severity: 'medium',
                source: '10.0.0.54',
                target: 'Internal Network',
                status: 'Tracking',
                duration: '5 minutes',
                attempts: '22'
            },
            {
                id: 5,
                name: 'Malware Communication',
                type: 'Malware',
                severity: 'critical',
                source: 'Internal Host',
                target: 'C&C Server',
                status: 'Isolated',
                duration: '1 minute',
                attempts: '3'
            },
            {
                id: 6,
                name: 'Data Exfiltration Attempt',
                type: 'Data Breach',
                severity: 'critical',
                source: 'Process: svchost.exe',
                target: 'Database Server',
                status: 'Blocked',
                duration: '30 seconds',
                attempts: '1'
            },
            {
                id: 7,
                name: 'Suspicious DNS Queries',
                type: 'Network',
                severity: 'medium',
                source: 'Multiple Hosts',
                target: 'External Domains',
                status: 'Analyzing',
                duration: '15 minutes',
                attempts: '892'
            }
        ];

        // Populate threats
        function populateThreats(filter = 'all') {
            const grid = document.getElementById('threatGrid');
            grid.innerHTML = '';
            
            const filteredThreats = filter === 'all' 
                ? threats 
                : threats.filter(t => t.severity === filter);
            
            filteredThreats.forEach(threat => {
                const card = document.createElement('div');
                card.className = `threat-card ${threat.severity}`;
                card.innerHTML = `
                    <div class="threat-header">
                        <div>
                            <div class="threat-title">${threat.name}</div>
                            <div class="threat-type">${threat.type}</div>
                        </div>
                        <span class="threat-severity severity-${threat.severity}">${threat.severity}</span>
                    </div>
                    <div class="threat-details">
                        <div class="detail-row">
                            <span class="detail-label">Source:</span>
                            <span class="detail-value">${threat.source}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Target:</span>
                            <span class="detail-value">${threat.target}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Duration:</span>
                            <span class="detail-value">${threat.duration}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Attempts:</span>
                            <span class="detail-value">${threat.attempts}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Status:</span>
                            <span class="detail-value" style="color: var(--warning);">${threat.status}</span>
                        </div>
                    </div>
                    <div class="threat-actions">
                        <button class="action-btn" onclick="analyzeThreat(${threat.id})">Analyze</button>
                        <button class="action-btn" onclick="blockThreat(${threat.id})">Block</button>
                        <button class="action-btn danger" onclick="neutralizeThreat(${threat.id})">Neutralize</button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // Filter threats
        function filterThreats(filter) {
            // Update active button
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Populate filtered threats
            populateThreats(filter);
        }

        // Threat actions
        function analyzeThreat(id) {
            addFeedItem(`Analyzing threat #${id}. Running deep packet inspection...`);
            setTimeout(() => {
                addFeedItem(`Analysis complete. Threat pattern identified. Updating defense rules.`);
            }, 2000);
        }

        function blockThreat(id) {
            addFeedItem(`Blocking threat #${id}. Updating firewall rules...`);
            setTimeout(() => {
                addFeedItem(`Threat source blocked. All connections terminated.`);
                updateThreatCounts();
            }, 1000);
        }

        function neutralizeThreat(id) {
            addFeedItem(`NEUTRALIZING THREAT #${id}. Deploying containment measures...`);
            
            // Remove threat card with animation
            const cards = document.querySelectorAll('.threat-card');
            cards.forEach((card, index) => {
                if (threats[index].id === id) {
                    card.style.transition = 'all 0.5s ease';
                    card.style.opacity = '0';
                    card.style.transform = 'scale(0.8)';
                    setTimeout(() => card.remove(), 500);
                }
            });
            
            setTimeout(() => {
                addFeedItem(`Threat neutralized successfully. System secured.`);
                updateThreatCounts();
            }, 1500);
        }

        // Start threat hunt
        function startThreatHunt() {
            addFeedItem('🎯 THREAT HUNT INITIATED. Scanning all network segments...');
            setTimeout(() => {
                addFeedItem('Scanning internal networks... 2,847 hosts identified.');
                setTimeout(() => {
                    addFeedItem('Analyzing traffic patterns... Anomalies detected on 3 hosts.');
                    setTimeout(() => {
                        addFeedItem('Threat hunt complete. 1 new threat discovered. Updating threat grid.');
                    }, 2000);
                }, 2000);
            }, 1000);
        }

        // Deploy defenses
        function deployDefenses() {
            addFeedItem('🛡️ DEPLOYING ACTIVE DEFENSES! Activating all protective measures.');
            document.body.style.animation = 'defenseFlash 0.5s ease 3';
            
            setTimeout(() => {
                addFeedItem('Deploying honeypots and deception systems...');
                setTimeout(() => {
                    addFeedItem('Isolating suspicious connections...');
                    setTimeout(() => {
                        addFeedItem('Active defense protocols engaged. System hardened.');
                    }, 1000);
                }, 1000);
            }, 1000);
        }

        // Add feed item
        function addFeedItem(message) {
            const feed = document.getElementById('threatFeed');
            const item = document.createElement('div');
            item.className = 'feed-item';
            
            const time = new Date().toLocaleTimeString();
            item.innerHTML = `
                <div class="feed-time">${time}</div>
                <div class="feed-message">${message}</div>
            `;
            
            feed.insertBefore(item, feed.firstChild);
            
            // Keep only last 20 items
            while (feed.children.length > 20) {
                feed.removeChild(feed.lastChild);
            }
        }

        // Update threat counts
        function updateThreatCounts() {
            const active = document.getElementById('activeThreats');
            const neutralized = document.getElementById('neutralizedThreats');
            
            active.textContent = Math.max(0, parseInt(active.textContent) - 1);
            neutralized.textContent = parseInt(neutralized.textContent) + 1;
        }

        // Auto-generate feed items
        const feedMessages = [
            'Network scan detected from IP 192.168.1.45',
            'Firewall blocked 127 connection attempts',
            'Unusual traffic pattern on port 8080',
            'AI classifier identified potential malware signature',
            'Quantum encryption keys rotated successfully',
            'OpenAI threat analysis complete. No new threats.',
            'Shodan scan revealed 2 exposed services',
            'Behavioral analysis detected anomaly in user session',
            'Database access pattern analysis in progress',
            'System health check: All services operational'
        ];

        function autoGenerateFeed() {
            setInterval(() => {
                const message = feedMessages[Math.floor(Math.random() * feedMessages.length)];
                addFeedItem(message);
            }, 10000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            populateThreats();
            autoGenerateFeed();
            
            // Initial feed items
            addFeedItem('Threat monitoring system online. All sensors active.');
            addFeedItem('Connected to global threat intelligence network.');
            addFeedItem('AI-powered analysis engine started.');
        });

        // Add defense flash animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes defenseFlash {
                0%, 100% { filter: brightness(1); }
                50% { filter: brightness(1.3) hue-rotate(120deg); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
